<subsystem name="nit_fader" help="Demo of nitpicker fader">
  <resource name="RAM" quantum="32M" />
  <binary name="init" />
  <config>
    <parent-provides>
      <service name="ROM"/>
      <service name="RAM"/>
      <service name="RM"/>
      <service name="LOG"/>
      <service name="CAP"/>
      <service name="SIGNAL"/>
      <service name="Nitpicker" />
      <service name="Timer" />
    </parent-provides>

    <default-route>
      <any-service> <any-child/> <parent/> </any-service>
    </default-route>

    <start name="nit_fb">
      <resource name="RAM" quantum="3M"/>
      <provides> <service name="Framebuffer"/>
                 <service name="Input"/> </provides>
      <config width="700" height="500"/>
      <route> <any-service> <parent/> </any-service> </route>
    </start>

    <start name="nitpicker">
      <resource name="RAM" quantum="1M"/>
      <provides><service name="Nitpicker"/></provides>
      <config>
        <domain name="pointer" layer="1" xray="no" origin="pointer" />
        <domain name="" layer="3" />

        <policy label="pointer"    domain="pointer"/>
        <policy label="" domain=""/>
      </config>
    </start>

    <start name="pointer">
      <resource name="RAM" quantum="1M"/>
      <route>
        <service name="Nitpicker"> <child name="nitpicker" /> </service>
        <any-service> <parent/> <any-child/> </any-service>
      </route>
    </start>

    <start name="dynamic_rom">
      <resource name="RAM" quantum="4M"/>
      <provides><service name="ROM"/></provides>
      <config verbose="yes">
        <rom name="nit_fader.config">
          <inline description="initial state">
            <config />
          </inline>
          <sleep milliseconds="500" />
          <inline description="make visible">
            <config alpha="255" />
          </inline>
          <sleep milliseconds="3000" />
          <inline description="reduce alpha">
            <config alpha="120" />
          </inline>
          <sleep milliseconds="3000" />
          <inline description="make invisible">
            <config alpha="0" />
          </inline>
          <sleep milliseconds="2000" />
          <empty />
        </rom>
      </config>
    </start>

    <start name="nit_fader">
      <resource name="RAM" quantum="5M"/>
      <provides><service name="Nitpicker"/></provides>
      <configfile name="nit_fader.config" />
      <route>
        <service name="ROM"> <if-args key="label" value="nit_fader.config"/>
          <child name="dynamic_rom" />
        </service>
        <service name="Nitpicker"> <child name="nitpicker" /> </service>
        <any-service> <parent/> <any-child/> </any-service>
      </route>
    </start>

    <start name="scout">
      <resource name="RAM" quantum="8M"/>
      <route>
        <service name="Nitpicker"> <child name="nit_fader" /> </service>
        <any-service> <parent/> <any-child/> </any-service>
      </route>
    </start>

    <start name="scout2">
      <binary name="scout" />
      <resource name="RAM" quantum="8M"/>
      <route>
        <service name="Nitpicker"> <child name="nitpicker" /> </service>
        <any-service> <parent/> <any-child/> </any-service>
      </route>
    </start>
  </config>
</subsystem>
